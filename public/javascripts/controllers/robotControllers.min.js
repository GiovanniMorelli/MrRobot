function addMove(a,b){var c=$.inArray(b.lastHeading,b.compass);a.match(/l/i)?turn(-1,c,b):a.match(/r/i)?turn(1,c,b):a.match(/f/i)&&move(b),console.log(b.gridXPosition+","+b.gridYPosition+b.lastHeading,0==b.checkPosition?"LOST":"")}function turn(a,b,c){var d=b+a;0>d?d=3:d>3&&(d=0),c.lastHeading=c.compass[d]}function checkPosition(a){(parseInt(a.gridXPosition)>parseInt(a.gridX)||parseInt(a.gridXPosition)<0||parseInt(a.gridYPosition)>parseInt(a.gridY)||parseInt(a.gridYPosition)<0)&&(a.checkPosition=!1)}function move(a){a.lastHeading.match(/n/i)?(a.gridYPosition=parseInt(a.gridYPosition),a.gridYPosition++,a.gridYPosition=a.gridYPosition+""):a.lastHeading.match(/e/i)?(a.gridXPosition=parseInt(a.gridXPosition),a.gridXPosition++,a.gridXPosition=a.gridXPosition+""):a.lastHeading.match(/s/i)?(a.gridYPosition=parseInt(a.gridYPosition),a.gridYPosition--,a.gridYPosition=a.gridYPosition+""):a.lastHeading.match(/w/i)&&(a.gridXPosition=parseInt(a.gridXPosition),a.gridXPosition--,a.gridXPosition=a.gridXPosition+"")}mrRobot.controller("manageRobot",function(a,b,c){a.onlyNumbers=/^\d+$/,a.onlyCoord=/^[l|r|f]*$/i;var d=this;d.submit=function(b){if(b){var c=0;for(a.compass=["N","E","S","W"],a.checkPosition=!0,console.log("Start==>"+a.gridXPosition+","+a.gridYPosition+a.lastHeading,0==a.checkPosition?"LOST":""),c=0;c<a.instructions.length&&(addMove(a.instructions[c],a),checkPosition(a),0!=a.checkPosition);c++);console.log("End==>"+a.gridXPosition+","+a.gridYPosition+a.lastHeading,0==a.checkPosition?"LOST":""),$("#resultMrRobot").text(a.gridXPosition+","+a.gridYPosition+a.lastHeading),0==a.checkPosition&&$("#resultLostMrRobot").text("LOST")}else console.log("invalid")}});